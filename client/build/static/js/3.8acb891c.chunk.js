(this["webpackJsonpjupiter-trading-fmcms"]=this["webpackJsonpjupiter-trading-fmcms"]||[]).push([[3],{691:function(e,n){},696:function(e,n){},697:function(e,n){},698:function(e,n){},699:function(e,n){},700:function(e,n){},802:function(e,n,s){"use strict";s.r(n);var c=s(16),t=s.n(c),a=s(24),i=s(168),j=s(42),l=s(13),r=s(1),d=s(23),b=s.n(d),h=s(90),x=s(22),m=s(684),O=s(686),o=s(701),u=(s(702),s(703),s(11));var p=function(e){var n=Object(o.defaultLayoutPlugin)(),s=e;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(m.T,{children:[Object(u.jsxs)(m.l,{sm:"12",md:"6",lg:"4",children:[Object(u.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(u.jsx)("span",{children:"Business Name: "}),Object(u.jsx)("span",{children:s.tradeName})]}),Object(u.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(u.jsx)("span",{children:"Campany Name: "}),Object(u.jsx)("span",{children:s.companyName})]}),Object(u.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(u.jsx)("span",{children:"Business TIN: "}),Object(u.jsx)("span",{children:s.TIN})]}),Object(u.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(u.jsx)("span",{children:"Business VAT: "}),Object(u.jsx)("span",{children:s.VAT})]})]}),Object(u.jsxs)(m.l,{sm:"12",md:"6",lg:"4",children:[Object(u.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(u.jsx)("span",{children:"Location City: "}),Object(u.jsx)("span",{children:s.city})]}),Object(u.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(u.jsx)("span",{children:"Sub City: "}),Object(u.jsx)("span",{children:s.SubCity})]}),Object(u.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(u.jsx)("span",{children:"Kebele: "}),Object(u.jsx)("span",{children:s.kebele})]}),Object(u.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(u.jsx)("span",{children:"Woreda: "}),Object(u.jsx)("span",{children:s.woreda})]}),Object(u.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(u.jsx)("span",{children:"Building Name: "}),Object(u.jsx)("span",{children:s.buildingName})]}),Object(u.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(u.jsx)("span",{children:"Office Number: "}),Object(u.jsx)("span",{children:s.officeNumber})]})]}),Object(u.jsxs)(m.l,{sm:"12",md:"6",lg:"4",children:[Object(u.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(u.jsx)("span",{children:"Email: "}),Object(u.jsx)("span",{children:s.email})]}),Object(u.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(u.jsx)("span",{children:"telephone: "}),Object(u.jsx)("span",{children:s.telephone})]}),Object(u.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(u.jsx)("span",{children:"Fax: "}),Object(u.jsx)("span",{children:s.fax})]}),Object(u.jsx)("hr",{}),Object(u.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(u.jsx)("span",{children:"Jupiter Branch: "}),Object(u.jsx)("span",{children:s.branch})]}),Object(u.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(u.jsx)("span",{children:"Technician Id: "}),Object(u.jsx)("span",{children:s.sw_Tech})]})]}),Object(u.jsxs)(m.l,{sm:"12",children:[Object(u.jsx)("hr",{}),Object(u.jsx)("h6",{children:" Certificate/ Business Trade license"}),Object(u.jsx)("hr",{}),Object(u.jsxs)("div",{className:"pdf-container",children:[s.TL_Image&&Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(O.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@2.9.359/build/pdf.worker.min.js",children:Object(u.jsx)(O.Viewer,{fileUrl:s.TL_Image,plugins:[n]})})}),!s.TL_Image&&Object(u.jsx)(u.Fragment,{children:"No pdf file selected"})]})]})]})})},f=s(685),N=s(165),g=s.n(N);n.default=function(){var e=Object(r.useContext)(h.b),n=Object(x.h)(),s=Object(l.a)(e.UserAPI.User,1)[0],c=Object(r.useState)(""),d=Object(l.a)(c,2),O=(d[0],d[1],{ownerID:n.clientId,tradeName:"",companyName:"",TIN:"",VAT:"",TL_Image:"",city:"",subCity:"",kebele:"",woreda:"",buildingName:"",officeNumber:"",telephone:"",email:"",fax:"",branch:s.branch,credentials:"Pending",sw_Tech:""}),o=Object(l.a)(e.BusinessAPI.businesses,1)[0],N=Object(r.useState)(O),w=Object(l.a)(N,2),y=w[0],T=w[1],I=Object(l.a)(e.branchAPI.branchs,1)[0],v=Object(l.a)(e.UsersAPI.users,1)[0],C=Object(l.a)(e.BusinessAPI.callback,2),k=C[0],D=C[1],A=Object(r.useState)(!1),E=Object(l.a)(A,2),_=E[0],V=E[1];console.log("upper"+JSON.stringify(y)),Object(r.useEffect)((function(){n.businessId?(V(!0),o.forEach((function(e){e._id===n.businessId&&T(e)}))):(V(!1),T(O))}),[n.businessId,o]);var B=function(e){try{var n=e.target,s=n.name,c=n.value;T(Object(j.a)(Object(j.a)({},y),{},Object(i.a)({},s,c)))}catch(t){}},S=function(e,n){g.a.fire({position:"center",background:"#EBEDEF",icon:e,text:n,confirmButtonColor:"#1E263C",showConfirmButton:!1})},F=function(){var e=Object(a.a)(t.a.mark((function e(s){var c,a,i;return t.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.preventDefault(),(c=new FormData).append("ownerID",y.ownerID),c.append("TIN",y.TIN),c.append("VAT",y.VAT),c.append("tradeName",y.tradeName),c.append("companyName",y.companyName),c.append("TL_Image",y.TL_Image),c.append("city",y.city),c.append("subCity",y.subCity),c.append("kebele",y.kebele),c.append("woreda",y.woreda),c.append("buildingName",y.buildingName),c.append("officeNumber",y.officeNumber),c.append("telephone",y.telephone),c.append("email",y.email),c.append("fax",y.fax),c.append("branch",y.branch),c.append("sw_Tech",y.sw_Tech),c.append("credentials",y.credentials),e.prev=20,!_){e.next=29;break}return e.next=24,b.a.put("/business/edit/".concat(n.businessId),c);case 24:a=e.sent,S("success",a.data.msg),D(!k),e.next=39;break;case 29:if(0!==o.filter((function(e){return e.TIN===y.TIN||e.VAT===y.VAT||e.tradeName===y.tradeName})).length){e.next=38;break}return e.next=33,b.a.post("/business/register",c);case 33:i=e.sent,S("success",i.data.msg),D(!k),e.next=39;break;case 38:S("error","TIN, business name or the VAT; one of them are taken by another business please check the details! ");case 39:e.next=44;break;case 41:e.prev=41,e.t0=e.catch(20),S("error",e.t0.response.data.msg);case 44:case"end":return e.stop()}}),e,null,[[20,41]])})));return function(n){return e.apply(this,arguments)}}();return Object(u.jsx)(m.T,{children:Object(u.jsx)(m.l,{xs:"12",className:"mb-4",children:Object(u.jsxs)(m.h,{children:[Object(u.jsx)(m.k,{children:"Enter the detail of the business."}),Object(u.jsx)(m.i,{children:Object(u.jsxs)(m.gb,{children:[Object(u.jsxs)(m.P,{variant:"tabs",children:[Object(u.jsx)(m.Q,{children:Object(u.jsxs)(m.R,{children:[Object(u.jsx)(f.a,{name:"cil-building"}),"Profile"]})}),Object(u.jsx)(m.Q,{children:Object(u.jsxs)(m.R,{children:[Object(u.jsx)(f.a,{name:"cil-location-pin"}),"Address"]})}),Object(u.jsx)(m.Q,{children:Object(u.jsxs)(m.R,{children:[Object(u.jsx)(f.a,{name:"cil-contact"}),"Others"]})}),Object(u.jsx)(m.Q,{children:Object(u.jsxs)(m.R,{children:[Object(u.jsx)(f.a,{name:"cil-applications"}),"Overview"]})})]}),Object(u.jsx)(m.v,{onSubmit:F,action:"POST",encType:"multipart/form-data",children:Object(u.jsxs)(m.eb,{className:"my-3",children:[Object(u.jsx)(m.fb,{children:Object(u.jsxs)(m.T,{children:[Object(u.jsx)(m.l,{sm:"12",md:"6",children:Object(u.jsxs)(m.w,{children:[Object(u.jsx)(m.I,{children:" Company Name "}),Object(u.jsx)(m.D,{id:"companyName",name:"companyName",placeholder:"Enter campany name",value:y.companyName,onChange:B,required:!0})]})}),Object(u.jsx)(m.l,{sm:"12",md:"6",children:Object(u.jsxs)(m.w,{children:[Object(u.jsx)(m.I,{children:" Trade Name "}),Object(u.jsx)(m.D,{id:"tradeName",name:"tradeName",placeholder:"Enter unique bussiness name.",value:y.tradeName,onChange:B,required:!0})]})}),Object(u.jsx)(m.l,{sm:"12",md:"6",children:Object(u.jsxs)(m.w,{children:[Object(u.jsx)(m.I,{children:" TIN "}),Object(u.jsx)(m.D,{id:"TIN",name:"TIN",placeholder:"Enter bussiness TIN.",value:y.TIN,onChange:B,required:!0})]})}),Object(u.jsx)(m.l,{sm:"12",md:"6",children:Object(u.jsxs)(m.w,{children:[Object(u.jsx)(m.I,{children:" VAT "}),Object(u.jsx)(m.D,{id:"VAT",name:"VAT",placeholder:"Enter bussiness VAT.",value:y.VAT,onChange:B,required:!0})]})})]})}),Object(u.jsx)(m.fb,{children:Object(u.jsxs)(m.T,{children:[Object(u.jsx)(m.l,{sm:"12",md:"4",children:Object(u.jsxs)(m.w,{children:[Object(u.jsx)(m.I,{children:" City "}),Object(u.jsx)(m.D,{id:"city",name:"city",placeholder:"Enter city where the business is located.",value:y.city,onChange:B})]})}),Object(u.jsx)(m.l,{sm:"12",md:"4",children:Object(u.jsxs)(m.w,{children:[Object(u.jsx)(m.I,{children:" Subcity "}),Object(u.jsx)(m.D,{id:"subCity",name:"subCity",placeholder:"Enter subcity.",value:y.subCity,onChange:B})]})}),Object(u.jsx)(m.l,{sm:"12",md:"4",children:Object(u.jsxs)(m.w,{children:[Object(u.jsx)(m.I,{children:" Kebele "}),Object(u.jsx)(m.D,{id:"kebele",name:"kebele",placeholder:"Enter kebele",value:y.kebele,onChange:B})]})}),Object(u.jsx)(m.l,{sm:"12",md:"4",children:Object(u.jsxs)(m.w,{children:[Object(u.jsx)(m.I,{children:" Woreda "}),Object(u.jsx)(m.D,{id:"woreda",name:"woreda",placeholder:"Enter woreda.",value:y.woreda,onChange:B})]})}),Object(u.jsx)(m.l,{sm:"12",md:"4",children:Object(u.jsxs)(m.w,{children:[Object(u.jsx)(m.I,{children:" Building Name "}),Object(u.jsx)(m.D,{id:"buildingName",name:"buildingName",placeholder:"Enter building name.",value:y.buildingName,onChange:B})]})}),Object(u.jsx)(m.l,{sm:"12",md:"4",children:Object(u.jsxs)(m.w,{children:[Object(u.jsx)(m.I,{children:" Office Number "}),Object(u.jsx)(m.D,{id:"officeNumber",name:"officeNumber",placeholder:"Enter office  number.",value:y.officeNumber,onChange:B})]})}),Object(u.jsxs)(m.l,{xs:"12",children:["Contacts of the business.",Object(u.jsx)("hr",{})]}),Object(u.jsx)(m.l,{sm:"12",md:"4",children:Object(u.jsxs)(m.w,{children:[Object(u.jsx)(m.I,{children:" Email "}),Object(u.jsx)(m.D,{id:"email",name:"email",placeholder:"Enter email address.",value:y.email,onChange:B,required:!0})]})}),Object(u.jsx)(m.l,{sm:"12",md:"4",children:Object(u.jsxs)(m.w,{children:[Object(u.jsx)(m.I,{children:" Telephone Number "}),Object(u.jsx)(m.D,{id:"telephone",name:"telephone",placeholder:"Enter telephone number.",value:y.telephone,onChange:B,required:!0})]})}),Object(u.jsx)(m.l,{sm:"12",md:"4",children:Object(u.jsxs)(m.w,{children:[Object(u.jsx)(m.I,{children:" Fax "}),Object(u.jsx)(m.D,{id:"fax",name:"fax",placeholder:"enter fax.",value:y.fax,onChange:B})]})})]})}),Object(u.jsxs)(m.fb,{children:[Object(u.jsxs)(m.T,{children:["client"===s.userRole&&Object(u.jsx)(m.l,{xs:"12",md:"6",children:Object(u.jsxs)(m.w,{children:[Object(u.jsx)(m.I,{children:"To which jupter branch?"}),Object(u.jsxs)(m.U,{"aria-label":"Default select example",id:"branch",name:"branch",onChange:B,value:y.branch,required:!0,children:[Object(u.jsx)("option",{value:"",children:"Select branch..."}),I.map((function(e){return Object(u.jsx)("option",{value:e._id,children:e.branchName},e._id)}))]})]})}),_&&"branch-admin"===s.userRole&&Object(u.jsx)(m.l,{xs:"12",md:"6",children:Object(u.jsxs)(m.w,{children:[Object(u.jsx)(m.I,{children:"Assigne technician for this bussiness."}),Object(u.jsxs)(m.U,{"aria-label":"Default select example",id:"sw_Tech",name:"sw_Tech",onChange:B,value:y.sw_Tech,children:[Object(u.jsx)("option",{value:"",children:"Select technician..."}),v.filter((function(e){return"technician"===e.userRole})).map((function(e){return Object(u.jsxs)("option",{value:e._id,children:[e.fName," ",e.mName," ",e.lName]},e._id)}))]})]})}),Object(u.jsxs)(m.l,{xs:"12",children:["Upload neccessary files of business",Object(u.jsx)("hr",{})]}),Object(u.jsx)(m.l,{sm:"12",md:"6",children:Object(u.jsxs)(m.w,{children:[Object(u.jsx)(m.I,{htmlFor:"formFile",children:"File size not more than (5MB)"}),Object(u.jsx)(m.D,{id:"TL_Image",type:"file",accept:".png, .jpg, .jpeg, .pdf, .docx",name:"TL_Image",onChange:function(e){T(Object(j.a)(Object(j.a)({},y),{},{TL_Image:e.target.files[0]}))}})]})})]}),Object(u.jsxs)(m.T,{className:"d-flex justify-content-center",children:[Object(u.jsxs)(m.l,{xs:"12",sm:"6",className:"d-flex justify-content-between",children:[Object(u.jsxs)(m.e,{type:"submit",size:"sm",className:"px-4",color:"dark",children:[Object(u.jsx)(f.a,{name:"cil-save"}),_?"Save Cahnges":"Send Detail"]}),!_&&Object(u.jsxs)(m.e,{size:"sm",className:"px-4",color:"danger",onClick:function(){return T(O)},children:[Object(u.jsx)(f.a,{name:"cil-x"})," Clear All"]})]}),Object(u.jsxs)(m.l,{sm:"12",children:[Object(u.jsx)("hr",{}),Object(u.jsx)("span",{className:"text-muted",children:"Fill all the forms properly, And send the detail. Then wait until the admin analysed the document and get you notified. This may take an hours or a day."})]})]})]}),Object(u.jsx)(m.fb,{children:Object(u.jsx)(p,Object(j.a)({},y))})]})})]})})]})})})}}}]);
//# sourceMappingURL=3.8acb891c.chunk.js.map