(this["webpackJsonpjupiter-trading-fmcms"]=this["webpackJsonpjupiter-trading-fmcms"]||[]).push([[13],{726:function(e,t,c){"use strict";c.r(t);var n=c(17),s=c.n(n),a=c(24),i=c(168),r=c(42),l=c(13),b=c(1),j=c(23),d=c.n(j),u=c(90),o=c(684),h=c(685),m=c(165),O=c.n(m),x=c(11);t.default=function(){var e=Object(b.useContext)(u.b),t=Object(l.a)(e.UserAPI.User,1)[0],c=Object(l.a)(e.MachineAPI.machines,1)[0],n=Object(l.a)(e.BusinessAPI.businesses,1)[0],j=Object(l.a)(e.MachineAPI.callback,2),m=j[0],f=j[1],p=Object(l.a)(e.BusinessAPI.callback,2),v=p[0],I=p[1],g=Object(l.a)(e.SalesAPI.callback,2),k=g[0],y=g[1],S={branch:t.branch,machineId:"",businessId:""},w=Object(b.useState)(S),N=Object(l.a)(w,2),C=N[0],A=N[1],B=function(e){var t=e.target,c=t.name,n=t.value;A(Object(r.a)(Object(r.a)({},C),{},Object(i.a)({},c,n)))},P=function(e,t){O.a.fire({position:"center",background:"#EBEDEF",icon:e,text:t,confirmButtonColor:"#3C4B64",showConfirmButton:!0})},D=function(){var e=Object(a.a)(s.a.mark((function e(t){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d.a.post("/machine/distribute",Object(r.a)({},C));case 4:c=e.sent,P("success",c.data.msg),f(!m),I(!v),y(!k),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),P("error",e.t0.response.data.msg);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)(o.T,{className:"d-flex justify-content-center",children:Object(x.jsxs)(o.h,{sm:"12",md:"10",lg:"8",children:[Object(x.jsx)(o.k,{}),Object(x.jsxs)(o.v,{onSubmit:D,children:[Object(x.jsx)(o.i,{children:Object(x.jsxs)(o.T,{children:[Object(x.jsx)(o.l,{md:"6",children:Object(x.jsxs)(o.w,{children:[Object(x.jsx)(o.I,{children:"Select Machine"}),Object(x.jsxs)(o.U,{"aria-label":"Default select example",id:"machineId",name:"machineId",onChange:B,value:C.machineId,required:!0,children:[Object(x.jsx)("option",{value:"",children:"Select machine identity..."}),c.filter((function(e){return"sold"!==e.salesStatus&&e.branch==t.branch&&"fine"===e.problemStatus})).map((function(e){return Object(x.jsxs)("option",{value:e._id,children:["SEN: ",e.serialNumber," ","---","Brand: ",e.brand]},e._id)}))]}),Object(x.jsx)("small",{className:"text-muted",children:"If the machine is not in the above list it may be distributed or it's problem status is damaged!"})]})}),Object(x.jsx)(o.l,{md:"6",children:Object(x.jsxs)(o.w,{children:[Object(x.jsx)(o.I,{children:"Select business"}),Object(x.jsxs)(o.U,{"aria-label":"Default select example",id:"businessId",name:"businessId",onChange:B,value:C.businessId,required:!0,children:[Object(x.jsx)("option",{value:"",children:"Select business identity..."}),n.filter((function(e){return"unassigned"===e.machine&&"Accepted"===e.credentials&&e.branch==t.branch})).map((function(e){return Object(x.jsx)("option",{value:e._id,children:e.tradeName},e._id)}))]}),Object(x.jsx)("small",{className:"text-muted",children:"If the business is not in the list above it may be assigned a mchine or you aren't accepted it yet!"})]})})]})}),Object(x.jsx)(o.j,{children:Object(x.jsx)(o.T,{className:"d-flex justify-content-center",children:Object(x.jsx)(o.l,{sm:"12",md:"6",lg:"4",children:Object(x.jsxs)(o.T,{children:[Object(x.jsx)(o.l,{children:Object(x.jsxs)(o.e,{type:"submit",size:"sm",color:"dark",className:"w-100",children:[Object(x.jsx)(h.a,{name:"cil-control"})," Distribute"]})}),Object(x.jsx)(o.l,{children:Object(x.jsxs)(o.e,{size:"sm",color:"danger",className:"w-100",onClick:function(){return A(S)},children:[Object(x.jsx)(h.a,{name:"cil-x"})," Clear"]})})]})})})})]})]})})}}}]);
//# sourceMappingURL=13.755bd921.chunk.js.map