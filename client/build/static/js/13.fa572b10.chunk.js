(this["webpackJsonpjupiter-trading-fmcms"]=this["webpackJsonpjupiter-trading-fmcms"]||[]).push([[13],{785:function(e,t,n){"use strict";n.r(t);var c=n(16),s=n.n(c),a=n(24),r=n(168),i=n(42),l=n(13),o=n(1),j=n(23),u=n.n(j),m=n(90),d=n(685),b=n(165),h=n.n(b),x=n(684),O=n(11),f=["fName","mName","lName","gender","phoneNumber","email","Actions"];t.default=function(){var e=Object(o.useContext)(m.b),t=Object(l.a)(e.token,1)[0],n=Object(l.a)(e.UserAPI.User,1)[0],c=Object(l.a)(e.UsersAPI.users,2),j=c[0],b=(c[1],Object(o.useState)(j)),p=Object(l.a)(b,2),N=p[0],v=p[1],g=Object(l.a)(e.UsersAPI.callback,2),w=g[0],C=g[1],k=Object(o.useState)(!1),D=Object(l.a)(k,2),y=D[0],B=D[1],S=Object(o.useState)("none"),A=Object(l.a)(S,2),z=A[0],F=A[1],P={fName:"",mName:"",lName:"",gender:"",photo:"/public/images/ng.png",branch:n.branch,phoneNumber:"",email:"",userRole:"client"},E=Object(o.useState)(P),R=Object(l.a)(E,2),q=R[0],J=R[1];Object(o.useEffect)((function(){v(j.filter((function(e){return"client"===e.userRole&&e.branch===n.branch})))}),[j]);var U=function(e){var t=e.target,n=t.name,c=t.value;J(Object(i.a)(Object(i.a)({},q),{},Object(r.a)({},n,c)))},M=function(e,t){h.a.fire({position:"center",background:"#EBEDEF",icon:e,text:t,confirmButtonColor:"#3C4B64",showConfirmButton:!0})},I=function(){var e=Object(a.a)(s.a.mark((function e(n){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,u.a.post("/user/register",Object(i.a)({},q),{headers:{Authorization:t}});case 4:c=e.sent,M("success",c.data.msg),B(!y),C(!w),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),M("error",e.t0.response.data.msg);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(a.a)(s.a.mark((function e(n){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,u.a.put("/user/edit/".concat(z),Object(i.a)({},q),{headers:{Authorization:t}});case 4:c=e.sent,M("success",c.data.msg),B(!y),C(!w),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),M("error",e.t0.response.data.msg);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(a.a)(s.a.mark((function e(n,c,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{h.a.fire({title:"Delete?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#1E263C",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){var e=Object(a.a)(s.a.mark((function e(c){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.isConfirmed){e.next=6;break}return e.next=3,u.a.delete("/user/delete/".concat(n),{headers:{Authorization:t}});case 3:a=e.sent,h.a.fire("Deleted!",a.data.msg,"success"),C(!w);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(c){M("error",c.response.data.msg)}case 1:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}();return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(x.h,{className:" shadow-sm",children:[Object(O.jsxs)(x.k,{className:"d-flex justify-content-between",children:["branch-admin"===n.userRole||"sales"===n.userRole?Object(O.jsx)("h6",{className:"text-muted",children:"Clients/Business-owners under this branch."}):Object(O.jsx)("h6",{className:"text-muted",children:"List of all clients."}),"sales"===n.userRole&&Object(O.jsxs)(x.e,{size:"sm",color:"secondary",onClick:function(){J(Object(i.a)({client:q},P)),F("none"),B(!y)},children:[Object(O.jsx)(d.a,{name:"cil-plus"})," Add Business Owner"]})]}),Object(O.jsx)(x.i,{children:Object(O.jsx)(x.o,{items:N,fields:f,tableFilter:!0,columnFilter:!0,itemsPerPageSelect:!0,itemsPerPage:10,hover:!0,cleaner:!0,sorter:!0,pagination:!0,scopedSlots:{Actions:function(e){return Object(O.jsxs)("td",{className:"d-flex justify-content-between",children:["sales"===n.userRole&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(x.J,{className:"text-success",onClick:function(){F(e._id),J(Object(i.a)({client:e},e)),B(!y)},children:Object(O.jsx)(x.jb,{content:"Edit the  - ".concat(e.fName," ").concat(e.mName,"- client detail."),children:Object(O.jsx)(d.a,{name:"cil-pencil"})})}),Object(O.jsx)("span",{className:"text-muted",children:"|"}),Object(O.jsx)(x.J,{className:"text-danger",onClick:function(){return _(e._id,e.fName,e.mName)},children:Object(O.jsx)(x.jb,{content:"Delete - ".concat(e.fName," ").concat(e.mName,"- client."),children:Object(O.jsx)(d.a,{name:"cil-trash"})})}),Object(O.jsx)("span",{className:"text-muted",children:"|"})," "]}),Object(O.jsx)(x.J,{className:"text-primary",to:"/client/detail/".concat(e._id),children:Object(O.jsx)(x.jb,{content:"See detail of - ".concat(e.fName," ").concat(e.mName,"- client."),children:Object(O.jsx)(d.a,{name:"cil-fullscreen"})})})]})}}})}),Object(O.jsxs)(x.K,{size:"lg",show:y,onClose:function(){return B(!y)},children:[Object(O.jsx)(x.N,{closeButton:!0,children:Object(O.jsx)(x.O,{className:"text-muted",children:"Give access to a client"})}),Object(O.jsxs)(x.v,{onSubmit:I,children:[Object(O.jsx)(x.L,{children:Object(O.jsxs)(x.T,{children:[Object(O.jsx)(x.l,{xs:"12",md:"4",children:Object(O.jsxs)(x.w,{children:["First name",Object(O.jsx)(x.D,{id:"fName",name:"fName",onChange:U,value:q.fName,required:!0})]})}),Object(O.jsx)(x.l,{xs:"12",md:"4",children:Object(O.jsxs)(x.w,{children:["Middle Name",Object(O.jsx)(x.D,{id:"mName",name:"mName",onChange:U,value:q.mName,required:!0})]})}),Object(O.jsx)(x.l,{xs:"12",md:"4",children:Object(O.jsxs)(x.w,{children:["Last Name",Object(O.jsx)(x.D,{id:"lName",name:"lName",onChange:U,value:q.lName})]})}),Object(O.jsx)(x.l,{xs:"12",md:"3",children:Object(O.jsxs)(x.w,{children:["Gender",Object(O.jsxs)(x.U,{"aria-label":"Default select example",id:"gender",name:"gender",onChange:U,value:q.gender,required:!0,children:[Object(O.jsx)("option",{value:"",children:"Select gender"}),Object(O.jsx)("option",{value:"Male",children:"Male"}),Object(O.jsx)("option",{value:"Female",children:"Fmale"})]})]})}),Object(O.jsx)(x.l,{xs:"12",md:"5",children:Object(O.jsxs)(x.w,{children:["Email",Object(O.jsx)(x.D,{type:"email",id:"email",name:"email",onChange:U,value:q.email,required:!0})]})}),Object(O.jsx)(x.l,{xs:"12",md:"4",children:Object(O.jsxs)(x.w,{children:["Phone-number",Object(O.jsx)(x.D,{id:"phoneNumber",name:"phoneNumber",onChange:U,value:q.phoneNumber,required:!0})]})})]})}),Object(O.jsxs)(x.M,{children:["none"===z?Object(O.jsxs)(x.e,{type:"submit",size:"sm",color:"success",children:[Object(O.jsx)(d.a,{name:"cil-save"})," Register Client"]}):Object(O.jsxs)(x.e,{onClick:L,size:"sm",color:"success",children:[Object(O.jsx)(d.a,{name:"cil-save"})," Save Change"]}),Object(O.jsxs)(x.e,{size:"sm",color:"danger",onClick:function(){return B(!y)},children:[Object(O.jsx)(d.a,{name:"cil-x"})," Close"]})]})]})]})]})})}}}]);
//# sourceMappingURL=13.fa572b10.chunk.js.map