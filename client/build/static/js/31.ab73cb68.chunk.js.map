{"version":3,"sources":["Components/Employee/RegisterEmployee.js"],"names":["userAttributes","fName","mName","lName","gender","photo","branch","city","subCity","kebele","woreda","phoneNumber","email","userRole","RegisterEmployee","props","params","useParams","state","useContext","GlobalState","token","branchs","branchAPI","UsersAPI","callback","setCallback","users","useState","user","setUser","onEdit","setOnEdit","useEffect","id","forEach","employee","_id","sweetAlert","type","text","Swal","fire","position","background","icon","confirmButtonColor","showConfirmButton","onChangeInput","e","target","name","value","onSubmitRegisterUser","a","preventDefault","axios","put","headers","Authorization","res","data","msg","post","response","className","to","size","variant","color","onSubmit","xs","md","onChange","required","map","branchName","sm","onClick"],"mappings":"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","file":"static/js/31.ab73cb68.chunk.js","sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { GlobalState } from \"../../GlobalState\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport {\r\n  CButton,\r\n  CCard,\r\n  CCardBody,\r\n  CCardFooter,\r\n  CCardHeader,\r\n  CCol,\r\n  CForm,\r\n  CFormGroup,\r\n  CInput,\r\n  CLabel,\r\n  CSelect,\r\n  CRow,\r\n} from \"@coreui/react\";\r\nimport CIcon from \"@coreui/icons-react\";\r\nimport Swal from \"sweetalert2\";\r\n\r\nconst userAttributes = {\r\n  fName: \"\",\r\n  mName: \"\",\r\n  lName: \"\",\r\n  gender: \"\",\r\n  photo: \"/public/images/ng.png\",\r\n  branch: \"\",\r\n  city: \"\",\r\n  subCity: \"\",\r\n  kebele: \"\",\r\n  woreda: \"\",\r\n  phoneNumber: \"\",\r\n  email: \"\",\r\n  userRole: \"\",\r\n};\r\nconst RegisterEmployee = (props) => {\r\n  const params = useParams();\r\n  const state = useContext(GlobalState);\r\n  const [token] = state.token;\r\n  const [branchs] = state.branchAPI.branchs;\r\n  const [callback, setCallback] = state.UsersAPI.callback;\r\n  const [users] = state.UsersAPI.users;\r\n  const [user, setUser] = useState(userAttributes);\r\n  const [onEdit, setOnEdit] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (params.id) {\r\n      setOnEdit(true);\r\n      users.forEach((employee) => {\r\n        if (employee._id === params.id) {\r\n          setUser(employee);\r\n        }\r\n      });\r\n    } else {\r\n      setOnEdit(false);\r\n      setUser(userAttributes);\r\n    }\r\n  }, [params.id, users]);\r\n\r\n  const sweetAlert = (type, text) => {\r\n    Swal.fire({\r\n      position: \"center\",\r\n      background: \"#EBEDEF\", // 2EB85C success // E55353 danger // 1E263C sidebar\r\n      icon: type,\r\n      text: text,\r\n      confirmButtonColor: \"#1E263C\",\r\n      showConfirmButton: false,\r\n      // timer: 1500,\r\n    });\r\n  };\r\n  const onChangeInput = (e) => {\r\n    const { name, value } = e.target;\r\n    setUser({ ...user, [name]: value });\r\n  };\r\n\r\n  const onSubmitRegisterUser = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (onEdit) {\r\n        const res = await axios.put(\r\n          `/user/edit/${params.id}`,\r\n          { ...user },\r\n          {\r\n            headers: { Authorization: token },\r\n          }\r\n        );\r\n        setCallback(!callback);\r\n        sweetAlert(\"success\", res.data.msg);\r\n      } else {\r\n        const res = await axios.post(\"/user/register\", { ...user });\r\n        setCallback(!callback);\r\n        sweetAlert(\"success\", res.data.msg);\r\n      }\r\n      // console.log(user);\r\n    } catch (error) {\r\n      sweetAlert(\"error\", error.response.data.msg);\r\n    }\r\n  };\r\n\r\n  const clearAllFields = () => {\r\n    setUser({ user, ...userAttributes });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <CCard>\r\n        <CCardHeader className=\"d-flex justify-content-between\">\r\n          <CLabel>\r\n            Employee Registration\r\n            <small> Form</small>\r\n          </CLabel>\r\n          <CButton to=\"/Employee/List\" size=\"sm\" variant=\"outline\" color=\"dark\">\r\n            <CIcon name=\"cil-list-numbered\" /> Employee List\r\n          </CButton>\r\n        </CCardHeader>\r\n        <CCardBody>\r\n          <CForm onSubmit={onSubmitRegisterUser}>\r\n            <CRow>\r\n              <CCol xs=\"12\" md=\"4\">\r\n                <CFormGroup>\r\n                  First name\r\n                  <CInput\r\n                    id=\"fName\"\r\n                    name=\"fName\"\r\n                    onChange={onChangeInput}\r\n                    value={user.fName}\r\n                    required\r\n                  />\r\n                </CFormGroup>\r\n              </CCol>\r\n              <CCol xs=\"12\" md=\"4\">\r\n                <CFormGroup>\r\n                  Middle Name\r\n                  <CInput\r\n                    id=\"mName\"\r\n                    name=\"mName\"\r\n                    onChange={onChangeInput}\r\n                    value={user.mName}\r\n                    required\r\n                  />\r\n                </CFormGroup>\r\n              </CCol>\r\n\r\n              <CCol xs=\"12\" md=\"4\">\r\n                <CFormGroup>\r\n                  Last Name\r\n                  <CInput\r\n                    id=\"lName\"\r\n                    name=\"lName\"\r\n                    onChange={onChangeInput}\r\n                    value={user.lName}\r\n                  />\r\n                </CFormGroup>\r\n              </CCol>\r\n              <CCol xs=\"12\" md=\"3\">\r\n                <CFormGroup>\r\n                  Gender\r\n                  <CSelect\r\n                    aria-label=\"Default select example\"\r\n                    id=\"gender\"\r\n                    name=\"gender\"\r\n                    onChange={onChangeInput}\r\n                    value={user.gender}\r\n                    required\r\n                  >\r\n                    <option value=\"\">Select gender</option>\r\n                    <option value=\"Male\">Male</option>\r\n                    <option value=\"Female\">Fmale</option>\r\n                  </CSelect>\r\n                </CFormGroup>\r\n              </CCol>\r\n              <CCol xs=\"12\" md=\"5\">\r\n                <CFormGroup>\r\n                  Email\r\n                  <CInput\r\n                    type=\"email\"\r\n                    id=\"email\"\r\n                    name=\"email\"\r\n                    onChange={onChangeInput}\r\n                    value={user.email}\r\n                    required\r\n                  />\r\n                </CFormGroup>\r\n              </CCol>\r\n              <CCol xs=\"12\" md=\"4\">\r\n                <CFormGroup>\r\n                  Phone-number\r\n                  <CInput\r\n                    id=\"phoneNumber\"\r\n                    name=\"phoneNumber\"\r\n                    onChange={onChangeInput}\r\n                    value={user.phoneNumber}\r\n                    required\r\n                  />\r\n                </CFormGroup>\r\n              </CCol>\r\n\r\n              <CCol xs=\"12\" md=\"3\">\r\n                <CFormGroup>\r\n                  Address City\r\n                  <CInput\r\n                    id=\"city\"\r\n                    name=\"city\"\r\n                    onChange={onChangeInput}\r\n                    value={user.city}\r\n                  />\r\n                </CFormGroup>\r\n              </CCol>\r\n              <CCol xs=\"12\" md=\"3\">\r\n                <CFormGroup>\r\n                  Sub city\r\n                  <CInput\r\n                    id=\"subCity\"\r\n                    name=\"subCity\"\r\n                    onChange={onChangeInput}\r\n                    value={user.subCity}\r\n                  />\r\n                </CFormGroup>\r\n              </CCol>\r\n              <CCol xs=\"12\" md=\"3\">\r\n                <CFormGroup>\r\n                  Kebele\r\n                  <CInput\r\n                    id=\"kebele\"\r\n                    name=\"kebele\"\r\n                    onChange={onChangeInput}\r\n                    value={user.kebele}\r\n                  />\r\n                </CFormGroup>\r\n              </CCol>\r\n              <CCol xs=\"12\" md=\"3\">\r\n                <CFormGroup>\r\n                  Woreda\r\n                  <CInput\r\n                    id=\"woreda\"\r\n                    name=\"woreda\"\r\n                    onChange={onChangeInput}\r\n                    value={user.woreda}\r\n                  />\r\n                </CFormGroup>\r\n              </CCol>\r\n\r\n              <CCol xs=\"12\" md=\"4\">\r\n                <CFormGroup>\r\n                  Employee task\r\n                  <CSelect\r\n                    aria-label=\"Default select example\"\r\n                    id=\"userRole\"\r\n                    name=\"userRole\"\r\n                    onChange={onChangeInput}\r\n                    value={user.userRole}\r\n                    required\r\n                  >\r\n                    <option value=\"\">Select employe task</option>\r\n                    <option value=\"sales\">sales</option>\r\n                    <option value=\"technician\">Technician</option>\r\n                    <option value=\"branch-admin\">Branch Admin</option>\r\n                    <option value=\"super-admin\">Super Admin</option>\r\n                  </CSelect>\r\n                </CFormGroup>\r\n              </CCol>\r\n              <CCol xs=\"12\" md=\"4\">\r\n                <CFormGroup>\r\n                  Employee branch\r\n                  <CSelect\r\n                    aria-label=\"Default select example\"\r\n                    id=\"branch\"\r\n                    name=\"branch\"\r\n                    onChange={onChangeInput}\r\n                    value={user.branch}\r\n                    required\r\n                  >\r\n                    <option value=\"\">Select employee branch</option>\r\n                    {branchs.map((branch) => (\r\n                      <option value={branch._id} key={branch._id}>\r\n                        {branch.branchName}\r\n                      </option>\r\n                    ))}\r\n                  </CSelect>\r\n                </CFormGroup>\r\n              </CCol>\r\n            </CRow>\r\n            <br />\r\n            <CRow className=\"d-flex justify-content-center\">\r\n              <CCol xs=\"12\" sm=\"6\" className=\"d-flex justify-content-between\">\r\n                <CButton\r\n                  type=\"submit\"\r\n                  size=\"sm\"\r\n                  className=\"px-4\"\r\n                  color=\"success\"\r\n                >\r\n                  <CIcon name=\"cil-save\" /> Save Detail\r\n                </CButton>\r\n                {!onEdit && (\r\n                  <CButton\r\n                    size=\"sm\"\r\n                    className=\"px-4\"\r\n                    color=\"danger\"\r\n                    onClick={clearAllFields}\r\n                  >\r\n                    <CIcon name=\"cil-x\" /> Clear All\r\n                  </CButton>\r\n                )}\r\n              </CCol>\r\n            </CRow>\r\n          </CForm>\r\n        </CCardBody>\r\n        <CCardFooter></CCardFooter>\r\n      </CCard>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default RegisterEmployee;\r\n"],"sourceRoot":""}