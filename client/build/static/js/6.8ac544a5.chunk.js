(this["webpackJsonpjupiter-trading-fmcms"]=this["webpackJsonpjupiter-trading-fmcms"]||[]).push([[6],{778:function(e,t,n){"use strict";n.r(t);var s=n(16),c=n.n(s),a=n(24),r=n(13),i=n(1),o=n(23),l=n.n(o),u=n(165),d=n.n(u),b=n(90),j=n(684),m=n(685),h=n(11);t.default=function(){var e=Object(i.useContext)(b.b),t=(Object(r.a)(e.token,1)[0],Object(r.a)(e.UserAPI.User,1)[0]),n=Object(r.a)(e.BusinessAPI.businesses,1)[0],s=Object(i.useState)(n),o=Object(r.a)(s,2),u=o[0],f=o[1],x=Object(r.a)(e.BusinessAPI.callback,2),O=x[0],p=x[1];Object(i.useEffect)((function(){"branch-admin"===t.userRole||"technician"===t.userRole||"sales"===t.userRole?f(n.filter((function(e){return e.branch==t.branch}))):"client"===t.userRole?f(n.filter((function(e){return e.ownerID==t._id}))):f(n)}),[t,n]);var N=function(){var e=Object(a.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{d.a.fire({title:"Delete?",text:"You won't be able to revert "+n+" Detail!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#1E263C",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){var e=Object(a.a)(c.a.mark((function e(n){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isConfirmed){e.next=6;break}return e.next=3,l.a.delete("/business/delete/".concat(t));case 3:s=e.sent,d.a.fire("Deleted!",s.data.msg,"success"),p(!O);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(i){s="error",r=i.response.data.msg,d.a.fire({position:"center",background:"#EBEDEF",icon:s,text:r,confirmButtonColor:"#3C4B64",showConfirmButton:!0})}case 1:case"end":return e.stop()}var s,r}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(j.h,{className:" shadow-sm",children:[Object(h.jsxs)(j.k,{className:"d-flex justify-content-between",children:["branch-admin"===t.userRole||"technician"===t.userRole?Object(h.jsx)("h6",{className:"text-muted",children:"Businesses under this branch."}):Object(h.jsx)("h6",{className:"text-muted",children:"List of all businesses."}),"client"===t.userRole&&Object(h.jsxs)(j.e,{size:"sm",color:"secondary",to:"/business/register",children:[Object(h.jsx)(m.a,{name:"cil-plus"})," Add new business"]})]}),Object(h.jsx)(j.i,{children:Object(h.jsx)(j.o,{items:u,fields:["companyName","tradeName","TIN","VAT","telephone","credentials","machine","Actions"],tableFilter:!0,columnFilter:!0,itemsPerPageSelect:!0,itemsPerPage:10,hover:!0,footer:!0,cleaner:!0,sorter:!0,pagination:!0,scopedSlots:{Actions:function(e){return Object(h.jsxs)("td",{className:"d-flex justify-content-between",children:[("sales"===t.userRole||"client"===t.userRole)&&"unassigned"===e.machine&&Object(h.jsxs)(h.Fragment,{children:[" ",Object(h.jsx)(j.J,{className:"text-success",to:{pathname:"/business/edit/".concat(e._id),state:e},children:Object(h.jsx)(j.jb,{content:"Edit the  - ".concat(e.TIN,"- business detail."),children:Object(h.jsx)(m.a,{name:"cil-pencil"})})}),Object(h.jsx)("span",{className:"text-muted",children:"|"}),Object(h.jsx)(j.J,{className:"text-danger",onClick:function(){return N(e._id,e.tradeName)},children:Object(h.jsx)(j.jb,{content:"Delete - ".concat(e.tradeName,"- business."),children:Object(h.jsx)(m.a,{name:"cil-trash"})})}),Object(h.jsx)("span",{className:"text-muted",children:"|"})," "]}),Object(h.jsx)(j.J,{className:"text-primary",to:"/business/Detail/".concat(e._id),children:Object(h.jsx)(j.jb,{content:"See detail of - ".concat(e.tradeName,"- business."),children:Object(h.jsx)(m.a,{name:"cil-fullscreen"})})})]})}}})})]})})}}}]);
//# sourceMappingURL=6.8ac544a5.chunk.js.map