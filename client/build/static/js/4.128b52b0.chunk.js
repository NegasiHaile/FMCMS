(this["webpackJsonpjupiter-trading-fmcms"]=this["webpackJsonpjupiter-trading-fmcms"]||[]).push([[4],{738:function(e,s,n){"use strict";n.r(s);var c=n(15),t=n.n(c),a=n(23),i=n(165),j=n(40),l=n(12),r=n(1),d=n(22),b=n.n(d),h=n(89),x=n(543),m=n(681),O=n(18);var o=function(e){var s=e;return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(m.T,{children:[Object(O.jsxs)(m.l,{sm:"12",md:"6",lg:"4",children:[Object(O.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(O.jsx)("span",{children:"Business Name: "}),Object(O.jsx)("span",{children:s.businessName})]}),Object(O.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(O.jsx)("span",{children:"Campany Name: "}),Object(O.jsx)("span",{children:s.companyName})]}),Object(O.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(O.jsx)("span",{children:"Business TIN: "}),Object(O.jsx)("span",{children:s.TIN})]}),Object(O.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(O.jsx)("span",{children:"Business VAT: "}),Object(O.jsx)("span",{children:s.VAT})]})]}),Object(O.jsxs)(m.l,{sm:"12",md:"6",lg:"4",children:[Object(O.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(O.jsx)("span",{children:"Location City: "}),Object(O.jsx)("span",{children:s.city})]}),Object(O.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(O.jsx)("span",{children:"Sub City: "}),Object(O.jsx)("span",{children:s.SubCity})]}),Object(O.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(O.jsx)("span",{children:"Kebele: "}),Object(O.jsx)("span",{children:s.kebele})]}),Object(O.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(O.jsx)("span",{children:"Woreda: "}),Object(O.jsx)("span",{children:s.woreda})]}),Object(O.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(O.jsx)("span",{children:"Building Name: "}),Object(O.jsx)("span",{children:s.buildingName})]}),Object(O.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(O.jsx)("span",{children:"Office Number: "}),Object(O.jsx)("span",{children:s.officeNumber})]})]}),Object(O.jsxs)(m.l,{sm:"12",md:"6",lg:"4",children:[Object(O.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(O.jsx)("span",{children:"Email: "}),Object(O.jsx)("span",{children:s.email})]}),Object(O.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(O.jsx)("span",{children:"telephone: "}),Object(O.jsx)("span",{children:s.telephone})]}),Object(O.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(O.jsx)("span",{children:"Fax: "}),Object(O.jsx)("span",{children:s.fax})]}),Object(O.jsx)("hr",{}),Object(O.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(O.jsx)("span",{children:"Jupiter Branch: "}),Object(O.jsx)("span",{children:s.branch})]}),Object(O.jsxs)("span",{className:"d-flex justify-content-between",children:[Object(O.jsx)("span",{children:"Technician Id: "}),Object(O.jsx)("span",{children:s.sw_Tech})]})]}),Object(O.jsxs)(m.l,{sm:"12",children:[Object(O.jsx)("hr",{}),Object(O.jsx)("h6",{children:" Certificate/ Business Trade license"}),Object(O.jsx)("hr",{}),Object(O.jsx)(m.C,{className:"w-100",src:s.TL_Image,alt:s.businessName})]})]})})},u=n(682),p=n(163),f=n.n(p);s.default=function(){var e=Object(r.useContext)(h.b),s=Object(x.h)(),n=Object(l.a)(e.UserAPI.User,1)[0],c=Object(r.useState)(""),d=Object(l.a)(c,2),p=(d[0],d[1],{ownerID:s.clientId,tradeName:"",companyName:"",TIN:"",VAT:"",TL_Image:"",city:"",subCity:"",kebele:"",woreda:"",buildingName:"",officeNumber:"",telephone:"",email:"",fax:"",branch:"",credentials:"Pending",sw_Tech:""}),N=Object(l.a)(e.BusinessAPI.businesses,1)[0],w=Object(r.useState)(p),g=Object(l.a)(w,2),y=g[0],I=g[1],T=Object(r.useState)(1),v=Object(l.a)(T,2),C=(v[0],v[1],Object(l.a)(e.branchAPI.branchs,1)[0]),D=Object(l.a)(e.UsersAPI.users,1)[0],k=Object(l.a)(e.BusinessAPI.callback,2),A=k[0],E=k[1],_=Object(r.useState)(!1),S=Object(l.a)(_,2),B=S[0],V=S[1];console.log("upper"+JSON.stringify(y)),Object(r.useEffect)((function(){"client"===n.userRole?(p.ownerID=n._id,I(p)):s.clientId&&(p.ownerID=s.clientId,I(p))}),[n,s.clientId]),Object(r.useEffect)((function(){s.businessId?(V(!0),N.forEach((function(e){e._id===s.businessId&&I(e)}))):(V(!1),I(p))}),[s.businessId,N]);var P=function(e){try{var s=e.target,n=s.name,c=s.value;I(Object(j.a)(Object(j.a)({},y),{},Object(i.a)({},n,c)))}catch(t){}},q=function(e,s){f.a.fire({position:"center",background:"#EBEDEF",icon:e,text:s,confirmButtonColor:"#1E263C",showConfirmButton:!1})},F=function(){var e=Object(a.a)(t.a.mark((function e(n){var c,a,i;return t.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),(c=new FormData).append("ownerID",y.ownerID),c.append("TIN",y.TIN),c.append("VAT",y.VAT),c.append("companyName",y.companyName),c.append("tradeName",y.tradeName),c.append("TL_Image",y.TL_Image),c.append("city",y.city),c.append("subCity",y.subCity),c.append("kebele",y.kebele),c.append("woreda",y.woreda),c.append("buildingName",y.buildingName),c.append("officeNumber",y.officeNumber),c.append("telephone",y.telephone),c.append("email",y.email),c.append("fax",y.fax),c.append("branch",y.branch),c.append("credentials",y.credentials),c.append("sw_Tech",y.sw_Tech),e.prev=20,!B){e.next=29;break}return e.next=24,b.a.put("/business/edit/".concat(s.businessId),c);case 24:a=e.sent,q("success",a.data.msg),E(!A),e.next=39;break;case 29:if(0!==N.filter((function(e){return e.TIN===y.TIN||e.VAT===y.VAT||e.tradeName===y.tradeName})).length){e.next=38;break}return e.next=33,b.a.post("/business/register",c);case 33:i=e.sent,q("success",i.data.msg),E(!A),e.next=39;break;case 38:q("error","TIN, business name or the VAT; one of them are taken by another business please check the details! ");case 39:e.next=44;break;case 41:e.prev=41,e.t0=e.catch(20),q("error",e.t0.response.data.msg);case 44:case"end":return e.stop()}}),e,null,[[20,41]])})));return function(s){return e.apply(this,arguments)}}();return Object(O.jsx)(m.T,{children:Object(O.jsx)(m.l,{xs:"12",className:"mb-4",children:Object(O.jsxs)(m.h,{children:[Object(O.jsx)(m.k,{children:"Enter the detail of the business."}),Object(O.jsx)(m.i,{children:Object(O.jsxs)(m.gb,{children:[Object(O.jsxs)(m.P,{variant:"tabs",children:[Object(O.jsx)(m.Q,{children:Object(O.jsxs)(m.R,{children:[Object(O.jsx)(u.a,{name:"cil-building"}),"Profile"]})}),Object(O.jsx)(m.Q,{children:Object(O.jsxs)(m.R,{children:[Object(O.jsx)(u.a,{name:"cil-location-pin"}),"Address"]})}),Object(O.jsx)(m.Q,{children:Object(O.jsxs)(m.R,{children:[Object(O.jsx)(u.a,{name:"cil-contact"}),"Others"]})}),Object(O.jsx)(m.Q,{children:Object(O.jsxs)(m.R,{children:[Object(O.jsx)(u.a,{name:"cil-applications"}),"Overview"]})})]}),Object(O.jsx)(m.v,{onSubmit:F,action:"POST",encType:"multipart/form-data",children:Object(O.jsxs)(m.eb,{className:"my-3",children:[Object(O.jsx)(m.fb,{children:Object(O.jsxs)(m.T,{children:[Object(O.jsx)(m.l,{sm:"12",md:"6",children:Object(O.jsxs)(m.w,{children:[Object(O.jsx)(m.I,{children:" Company Name "}),Object(O.jsx)(m.D,{id:"companyName",name:"companyName",placeholder:"Enter campany name",value:y.companyName,onChange:P,required:!0})]})}),Object(O.jsx)(m.l,{sm:"12",md:"6",children:Object(O.jsxs)(m.w,{children:[Object(O.jsx)(m.I,{children:" Trade Name "}),Object(O.jsx)(m.D,{id:"tradeName",name:"tradeName",placeholder:"Enter unique bussiness name.",value:y.tradeName,onChange:P,required:!0})]})}),Object(O.jsx)(m.l,{sm:"12",md:"6",children:Object(O.jsxs)(m.w,{children:[Object(O.jsx)(m.I,{children:" TIN "}),Object(O.jsx)(m.D,{id:"TIN",name:"TIN",placeholder:"Enter bussiness TIN.",value:y.TIN,onChange:P,required:!0})]})}),Object(O.jsx)(m.l,{sm:"12",md:"6",children:Object(O.jsxs)(m.w,{children:[Object(O.jsx)(m.I,{children:" VAT "}),Object(O.jsx)(m.D,{id:"VAT",name:"VAT",placeholder:"Enter bussiness VAT.",value:y.VAT,onChange:P,required:!0})]})})]})}),Object(O.jsx)(m.fb,{children:Object(O.jsxs)(m.T,{children:[Object(O.jsx)(m.l,{sm:"12",md:"4",children:Object(O.jsxs)(m.w,{children:[Object(O.jsx)(m.I,{children:" City "}),Object(O.jsx)(m.D,{id:"city",name:"city",placeholder:"Enter city where the business is located.",value:y.city,onChange:P})]})}),Object(O.jsx)(m.l,{sm:"12",md:"4",children:Object(O.jsxs)(m.w,{children:[Object(O.jsx)(m.I,{children:" Subcity "}),Object(O.jsx)(m.D,{id:"subCity",name:"subCity",placeholder:"Enter subcity.",value:y.subCity,onChange:P})]})}),Object(O.jsx)(m.l,{sm:"12",md:"4",children:Object(O.jsxs)(m.w,{children:[Object(O.jsx)(m.I,{children:" Kebele "}),Object(O.jsx)(m.D,{id:"kebele",name:"kebele",placeholder:"Enter kebele",value:y.kebele,onChange:P})]})}),Object(O.jsx)(m.l,{sm:"12",md:"4",children:Object(O.jsxs)(m.w,{children:[Object(O.jsx)(m.I,{children:" Woreda "}),Object(O.jsx)(m.D,{id:"woreda",name:"woreda",placeholder:"Enter woreda.",value:y.woreda,onChange:P})]})}),Object(O.jsx)(m.l,{sm:"12",md:"4",children:Object(O.jsxs)(m.w,{children:[Object(O.jsx)(m.I,{children:" Building Name "}),Object(O.jsx)(m.D,{id:"buildingName",name:"buildingName",placeholder:"Enter building name.",value:y.buildingName,onChange:P})]})}),Object(O.jsx)(m.l,{sm:"12",md:"4",children:Object(O.jsxs)(m.w,{children:[Object(O.jsx)(m.I,{children:" Office Number "}),Object(O.jsx)(m.D,{id:"officeNumber",name:"officeNumber",placeholder:"Enter office  number.",value:y.officeNumber,onChange:P})]})}),Object(O.jsxs)(m.l,{xs:"12",children:["Contacts of the business.",Object(O.jsx)("hr",{})]}),Object(O.jsx)(m.l,{sm:"12",md:"4",children:Object(O.jsxs)(m.w,{children:[Object(O.jsx)(m.I,{children:" Email "}),Object(O.jsx)(m.D,{id:"email",name:"email",placeholder:"Enter email address.",value:y.email,onChange:P,required:!0})]})}),Object(O.jsx)(m.l,{sm:"12",md:"4",children:Object(O.jsxs)(m.w,{children:[Object(O.jsx)(m.I,{children:" Telephone Number "}),Object(O.jsx)(m.D,{id:"telephone",name:"telephone",placeholder:"Enter telephone number.",value:y.telephone,onChange:P,required:!0})]})}),Object(O.jsx)(m.l,{sm:"12",md:"4",children:Object(O.jsxs)(m.w,{children:[Object(O.jsx)(m.I,{children:" Fax "}),Object(O.jsx)(m.D,{id:"fax",name:"fax",placeholder:"enter fax.",value:y.fax,onChange:P})]})})]})}),Object(O.jsxs)(m.fb,{children:[Object(O.jsxs)(m.T,{children:[Object(O.jsx)(m.l,{xs:"12",md:"6",children:Object(O.jsxs)(m.w,{children:[Object(O.jsx)(m.I,{children:"To which jupter branch?"}),Object(O.jsxs)(m.U,{"aria-label":"Default select example",id:"branch",name:"branch",onChange:P,value:y.branch,required:!0,children:[Object(O.jsx)("option",{value:"",children:"Select branch..."}),C.map((function(e){return Object(O.jsx)("option",{value:e._id,children:e.branchName},e._id)}))]})]})}),B&&"branch-admin"===n.userRole&&Object(O.jsx)(m.l,{xs:"12",md:"6",children:Object(O.jsxs)(m.w,{children:[Object(O.jsx)(m.I,{children:"Assigne technician for this bussiness."}),Object(O.jsxs)(m.U,{"aria-label":"Default select example",id:"sw_Tech",name:"sw_Tech",onChange:P,value:y.sw_Tech,children:[Object(O.jsx)("option",{value:"",children:"Select technician..."}),D.filter((function(e){return"technician"===e.userRole})).map((function(e){return Object(O.jsxs)("option",{value:e._id,children:[e.fName," ",e.mName," ",e.lName]},e._id)}))]})]})}),Object(O.jsxs)(m.l,{xs:"12",children:["Business trade license in image format",Object(O.jsx)("hr",{})]}),Object(O.jsx)(m.l,{sm:"12",md:"6",children:Object(O.jsxs)(m.w,{children:[Object(O.jsx)(m.I,{htmlFor:"formFile",children:"Upload trade licens of the business"}),Object(O.jsx)(m.D,{id:"TL_Image",type:"file",accept:".png, .jpg, .jpeg",name:"TL_Image",onChange:function(e){I(Object(j.a)(Object(j.a)({},y),{},{TL_Image:e.target.files[0]}))}})]})})]}),Object(O.jsxs)(m.T,{className:"d-flex justify-content-center",children:[Object(O.jsxs)(m.l,{xs:"12",sm:"6",className:"d-flex justify-content-between",children:[Object(O.jsxs)(m.e,{type:"submit",size:"sm",className:"px-4",color:"dark",children:[Object(O.jsx)(u.a,{name:"cil-save"}),B?"Save Cahnges":"Send Detail"]}),!B&&Object(O.jsxs)(m.e,{size:"sm",className:"px-4",color:"danger",onClick:function(){return I(p)},children:[Object(O.jsx)(u.a,{name:"cil-x"})," Clear All"]})]}),Object(O.jsxs)(m.l,{sm:"12",children:[Object(O.jsx)("hr",{}),Object(O.jsx)("span",{className:"text-muted",children:"Fill all the forms properly, And send the detail. Then wait until the admin analysed the document and get you notified. This may take an hours or a day."})]})]})]}),Object(O.jsx)(m.fb,{children:Object(O.jsx)(o,Object(j.a)({},y))})]})})]})})]})})})}}}]);
//# sourceMappingURL=4.128b52b0.chunk.js.map