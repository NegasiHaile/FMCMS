(this["webpackJsonpjupiter-trading-fmcms"]=this["webpackJsonpjupiter-trading-fmcms"]||[]).push([[15],{726:function(e,t,n){"use strict";n.r(t);var c=n(15),a=n.n(c),r=n(23),s=n(12),i=n(1),o=n(22),l=n.n(o),u=n(163),m=n.n(u),j=n(89),d=n(681),b=n(682),f=n(18);t.default=function(){var e=Object(i.useContext)(j.b),t=Object(s.a)(e.UserAPI.User,1)[0],n=Object(s.a)(e.token,1)[0],c=Object(s.a)(e.UsersAPI.users,1)[0],o=Object(i.useState)(c),u=Object(s.a)(o,2),h=u[0],p=u[1],x=Object(s.a)(e.branchAPI.branchs,1)[0],O=Object(s.a)(e.UsersAPI.callback,2),N=O[0],y=O[1];Object(i.useEffect)((function(){"branch-admin"===t.userRole?p(c.filter((function(e){return e.branch==t.branch}))):p(c)}),[t,c]);var g=function(){var e=Object(r.a)(a.a.mark((function e(t,c,s){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{m.a.fire({title:"Are you sure",text:"You want to delelte "+c+" "+s+"'s detail permanently?!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#1E263C",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){var e=Object(r.a)(a.a.mark((function e(c){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.isConfirmed){e.next=6;break}return e.next=3,l.a.delete("/user/delete/".concat(t),{headers:{Authorization:n}});case 3:r=e.sent,m.a.fire("Deleted!",r.data.msg,"success"),y(!N);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(i){alert(i.response.data.msg)}case 1:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}();return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(d.h,{className:" shadow-sm",children:["super-admin"===t.userRole&&Object(f.jsxs)(d.k,{className:"d-flex justify-content-between",children:[Object(f.jsx)(d.I,{children:"List of employees"}),Object(f.jsxs)(d.e,{to:"/Employee/register",size:"sm",variant:"outline",color:"dark",children:[Object(f.jsx)(b.a,{name:"cil-plus"})," Add Employee"]})]}),Object(f.jsx)(d.i,{children:Object(f.jsx)(d.o,{items:h.filter((function(e){return"branch-admin"===e.userRole||"technician"===e.userRole||"sales"===e.userRole})),fields:["fName","mName","lName","gender","email","phoneNumber","branch","userRole","status","Actions"],tableFilter:!0,itemsPerPageSelect:!0,itemsPerPage:10,hover:!0,footer:!0,cleaner:!0,sorter:!0,pagination:!0,scopedSlots:{branch:function(e){return Object(f.jsx)("td",{children:x.filter((function(t){return t._id===e.branch})).map((function(e){return e.branchName}))})},Actions:function(e){return Object(f.jsxs)("td",{className:"d-flex justify-content-between",children:["super-admin"===t.userRole&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(d.J,{className:"text-success",to:{pathname:"/Employee/Edit/".concat(e._id),state:e},children:Object(f.jsx)(d.jb,{content:"Edit the  - ".concat(e.fName," ").concat(e.mName,"- employee detail."),children:Object(f.jsx)(b.a,{name:"cil-pencil"})})}),Object(f.jsx)("span",{className:"text-muted",children:"|"}),Object(f.jsx)(d.J,{className:"text-danger",onClick:function(){return g(e._id,e.fName,e.mName)},children:Object(f.jsx)(d.jb,{content:"Delete - ".concat(e.fName," ").concat(e.mName,"- employee."),children:Object(f.jsx)(b.a,{name:"cil-trash"})})}),Object(f.jsx)("span",{className:"text-muted",children:"|"})]}),Object(f.jsx)(d.J,{className:"text-primary",to:"/user/profile/".concat(e._id),children:Object(f.jsx)(d.jb,{content:"See detail of - ".concat(e.fName," ").concat(e.mName,"- employee."),children:Object(f.jsx)(b.a,{name:"cil-fullscreen"})})})]})}}})})]})})}}}]);
//# sourceMappingURL=15.2254f2b3.chunk.js.map